version: 1.0

input:
  - person
  - user
  - beertab: null

tasks:
  get_tab:
    action: st2.kv.get
    input:
      key: "system.beertab.{{ ctx().user }}"
    next:
      - when: "{{ succeeded() }}"
        publish:
          - beertab: "{{ result() }}"

output:
  - beertab: "{{ ctx().beertab }}"
